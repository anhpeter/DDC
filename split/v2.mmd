---
title: SAP S/4HANA Master Entities - Phân tách theo nhóm chức năng
config:
  layout: elk
---

erDiagram
    direction lr

    %% %% ===== NHÓM 1: CƠ CẤU TỔ CHỨC =====
    %% subgraph "1. CƠ CẤU TỔ CHỨC"
        %% OperatingConcern ||--|| ControllingArea : "controllingArea"
        %% ControllingArea ||--|{ CompanyCode : "companyCode"
        %% CompanyCode ||--|{ Plant : "plant"
        %% Plant ||--|{ StorageLocation : "storageLocation"
        %% Plant ||--|{ ShippingPoint : "shippingPoint"
        
        %% %% Sales Organization
        %% CompanyCode ||--|| SalesOrg: "salesOrg" 
        %% SalesOrg ||--|{ SalesArea: "salesArea"
        %% DistributionChannel ||--|{ SalesArea: "channel"
        %% Division ||--|{ SalesArea: "division"
        
        %% %% Purchasing Organization
        %% CompanyCode ||--|{ BRG_CompanyCodePurchasingOrg: "companyCode"
        %% BRG_CompanyCodePurchasingOrg ||--|{ PurchasingOrg: "purchasingOrg"
        %% Plant ||--|{ MRPController : "plant"
    %% end

    %% %% ===== NHÓM 2: VẬT TƯ (MATERIAL) =====
    %% subgraph "2. VẬT TƯ & PHÂN LOẠI"
        %% %% Material Master
        %% MaterialType ||--|{ Material : "materialType"
        %% MaterialGroup ||--|{ Material: "materialGroup"
        %% Material }|--|| UOM: "baseUnit"
        %% Material }|--|| UOM: "weightUnit"
        %% Material }|--|| UOM: "volumeUnit"
        %% Material ||--|{ BRG_MaterialAlternativeUnit : "material"
        %% BRG_MaterialAlternativeUnit }|--|| UOM: "alternativeUnit"
        
        %% %% Material Plant
        %% Plant ||--|{ MaterialPlant: "plant"
        %% MaterialPlant }|--|| Material: "material"
        
        %% %% Material Storage
        %% StorageLocation ||--|{ BRG_MaterialStorageLocation: "storageLocation"
        %% Plant ||--|{ BRG_MaterialStorageLocation: "plant"
        %% BRG_MaterialStorageLocation }|--|| Material: "material"
        
        %% %% Material Sales
        %% SalesArea ||--|{ BRG_MaterialSalesArea: "salesArea"
        %% BRG_MaterialSalesArea }|--|| Material: "material"
        
        %% %% Material Valuation
        %% Plant }o--|| ValuationArea: "valuationPlant"
        %% CompanyCode |o--|| ValuationArea: "valuationCompanyCode"
        %% MaterialType ||--|{ ValuationClass: "materialType"
        %% Material ||--|{ MaterialValuation: "material"
        %% MaterialValuation }|--|| ValuationArea: "valuationArea"
        
        %% %% Material Classification & Characteristics
        %% ClassificationClass ||--|{ Characteristic: "classificationClass"
        %% Material ||--|{ BRG_MaterialBatch: "materialBatch"
        %% Plant ||--|{ BRG_MaterialBatch: "plant"
        %% BRG_MaterialBatch ||--|| ClassificationClass: "batchClass"
        %% BRG_MaterialBatch ||--|{ BRG_BatchCharacteristicValue: "batchValue"
        %% Characteristic ||--|{ BRG_BatchCharacteristicValue: "characteristic"
        
        %% %% BOM & Production Version
        %% Material ||--|{ ProductionVersion: "material"
        %% ProductionVersion ||--|| BOM: "bom"
        %% BOM ||--|{ BOMItems: "bom"
        %% Material ||--|{ BOMItems : "componentMaterial"
        %% BOMItems }|--|| UOM: "componentUnit"
        
        %% %% Purchasing Info Record
        %% PurchasingOrg ||--|{ PurchasingInfoRecord: "purchasingOrg"
        %% PurchasingGroup ||--|{ PurchasingInfoRecord: "purchasingGroup"
        %% Material ||--|{ PurchasingInfoRecord: "material"
        %% Vendor ||--|{ PurchasingInfoRecord: "vendor"
        %% Plant |o--|{ PurchasingInfoRecord: "plant"
        %% PurchasingInfoRecord }|--|| UOM : "priceUnit"
        %% PurchasingInfoRecord }|--|| UOM : "orderUnit"
        
        %% %% Source List & Quota
        %% Material ||--|{ SourceList : "material"
        %% Plant ||--|{ SourceList : "plant"
        %% Vendor ||--|{ SourceList : "vendor"
        %% SourceList ||--|{ QuotaArrangement : "sourceList"
        
        %% %% Material Text
        %% Material ||--|{ MaterialText : "material"
    %% end

    %% %% ===== NHÓM 3: DỰ ÁN (PROJECT) =====
    %% subgraph "3. DỰ ÁN"
        %% ProjectType ||--|{ ProjectDefinition : "projectType"
        %% ControllingArea ||--|{ ProjectDefinition: "controllingArea"
        %% CompanyCode ||--|{ ProjectDefinition: "companyCode"
        %% ProjectDefinition ||--|{ WBS: "projectDefinition"
        %% WBS ||--|| WBS: "parentWBS"
        %% CostCenter |o--|{ WBS: "defaultCostCenter"
        
        %% %% Project SKF
        %% WBS ||--|{ BRG_WBSSKF: "wbs"
        %% BRG_WBSSKF }|--|| SKF: "skf"
    %% end

    %% %% ===== NHÓM 4: ĐỐI TÁC KINH DOANH =====
    %% subgraph "4. ĐỐI TÁC KINH DOANH"
        %% %% Business Partner Core
        %% BusinessPartner ||--|| Customer: "customer"
        %% BusinessPartner ||--|| Vendor: "vendor"
        %% BusinessPartner ||--|| Employee: "employee"
        %% BusinessPartnerRole ||--|{ BusinessPartner : "businessPartner"
        %% BusinessPartnerCategory ||--|{ BusinessPartner : "businessPartner"
        %% BusinessPartnerGroup ||--|{ BusinessPartner : "businessPartner"
        
        %% %% Customer Enhanced
        %% CompanyCode ||--|{ BRG_CompanyCodeCustomer: "companyCode"
        %% BRG_CompanyCodeCustomer ||--|{ Customer: "customer"
        %% Customer ||--|{ BRG_CustomerSalesArea: "customer"
        %% BRG_CustomerSalesArea }|--|| SalesArea: "salesArea"
        %% PartnerFunction ||--|{ Customer : "customer"
        
        %% %% Customer Bank Details
        %% Customer ||--|{ BRG_CustomerAccountBank: "customer"
        %% BRG_CustomerAccountBank ||--|| AccountBank: "accountBank"
        %% AccountBank ||--|| BankKey: "bankKey"
        
        %% %% Vendor Enhanced
        %% Vendor ||--|{ VendorPurchasingOrg: "vendor"
        %% VendorPurchasingOrg ||--|{ PurchasingOrg: "purchasingOrg"
        %% CompanyCode ||--|{ BRG_CompanyCodeVendor: "companyCode"
        %% BRG_CompanyCodeVendor ||--|{ Vendor: "vendor"
        %% PartnerFunction ||--|{ Vendor : "vendor"
    %% end

    %% %% ===== NHÓM 5: SẢN XUẤT =====
    %% subgraph "5. SẢN XUẤT"
        %% Production Planning
        %% Work Center & Routing
        %% Routing ||--|{ WorkCenter : "workCenter"
        %% ProductionVersion ||--|| Routing: "routing"
        
        %% %% BOM & Production Version
        %% Material ||--|{ ProductionVersion: "material"
        %% ProductionVersion ||--|| BOM: "bom"
        %% BOM ||--|{ BOMItems: "bom"
        %% Material ||--|{ BOMItems : "componentMaterial"
        %% BOMItems }|--|| UOM: "componentUnit"
        
        %% %% Activity Type
        %% CostCenter ||--|{ BRG_CostCenterWorkCenter: "costCenter"
        %% BRG_CostCenterWorkCenter }|--|| WorkCenter: "workCenter"
        %% CostCenter ||--|{ ActivityType: "costCenter"
        %% WorkCenter ||--|{ ActivityType: "workCenter"
        %% ActivityType }|--|| UOM : "activityUnit"
    %% end

    %% %% ===== NHÓM 6: KẾ TOÁN - TÀI CHÍNH =====
    %% subgraph "6. KẾ TOÁN - TÀI CHÍNH"
         %% FI Configuration
        Currency ||--|{ CompanyCode : "localCurrency"
        %% Currency master
        Currency ||--|{ CurrencyExchangeRate : "fromCurrency"
        Currency ||--|{ CurrencyExchangeRate : "toCurrency"

        %% Exchange Rate Type
        ExchangeRateType ||--|{ CurrencyExchangeRate : "exchangeRateType"

        FiscalYearVariant ||--|{ CompanyCode : "fiscalVariant"
        PostingPeriodVariant ||--|{ CompanyCode : "periodVariant"
        
        %% Banking
        HouseBank ||--|{ CompanyCode : "houseBank"
        HouseBank ||--|{ BankKey : "bankKey"
        
        %% GL Accounts
        COA ||--|{ GlAccount : "chartOfAccounts"
        GlAccountGroup ||--|{ GlAccount : "glAccountGroup"
        CompanyCode ||--|{ BRG_CompanyCodeGlAccount: "companyCode"
        BRG_CompanyCodeGlAccount ||--|{ GlAccount: "glAccount"
        
        %% Controlling
        CompanyCode ||--|{ CostCenter: "companyCode"
        CostCenterGroup ||--|{ CostCenter: "costCenterGroup"
        Segment ||--|{ ProfitCenter: "segment"
        ProfitCenter ||--|{ CostCenter: "profitCenter"
        CostCenter ||--|{ BRG_CostCenterEmployee: "costCenter"
        BRG_CostCenterEmployee }|--|| Employee: "employee"
        
        %% Internal Orders
        CompanyCode ||--|{ InternalOrder: "companyCode"
        ControllingArea ||--|{ InternalOrder: "controllingArea"
        CostCenter |o--|{ InternalOrder: "defaultCostCenter"
        
        %% Account Assignment Groups
        AccountAssignmentGroup ||--|{ BRG_MaterialSalesArea: "materialAAG"
        AccountAssignmentGroup ||--|{ BRG_CustomerSalesArea: "customerAAG"
        BRG_AccountAssignmentGroupGlAccount }|--|| AccountAssignmentGroup: "materialAAG"
        BRG_AccountAssignmentGroupGlAccount }|--|| AccountAssignmentGroup: "customerAAG"
        GlAccount ||--|{ BRG_AccountAssignmentGroupGlAccount: "glAccount"
        
        %% Valuation Classes
        GlAccount ||--|{ BRG_GlAccountValuationClass: "glAccount"
        BRG_GlAccountValuationClass }|--|| ValuationClass: "valuationClass"
        MaterialType ||--|{ BRG_MaterialTypeValuationClass: "materialType"
        BRG_MaterialTypeValuationClass }|--|| ValuationClass: "valuationClass"
        
        %% Tax Configuration
        TaxCategory ||--|{ BRG_MaterialTax: "taxCategory"
        TaxClassification ||--|{ BRG_MaterialTax: "taxClassification"
        BRG_MaterialTax ||--|{ BRG_MaterialSalesArea: "materialSalesArea"
        Country ||--|{ TaxCode: "country"
        Country ||--|{ WithholdingTaxType: "country"
        TaxCode ||--|{ WithholdingTaxCode: "taxCode"
        WithholdingTaxType ||--|{ WithholdingTaxCode: "withholdingTaxType"
        
        %% Payment Terms & Methods
        PaymentTerms ||--|{ BRG_CompanyCodeVendor: "paymentTerms"
        PaymentMethods ||--|{ BRG_CompanyCodeVendor: "paymentMethods"
        TaxCode ||--|{ BRG_CustomerSalesArea: "taxCode"
        PaymentTerms ||--|{ BRG_CustomerSalesArea: "paymentTerms"
        PaymentMethods ||--|{ BRG_CustomerSalesArea: "paymentMethods"
        
        %% Withholding Tax
        WithholdingTaxType ||--|{ BRG_CompanyCodeVendor: "withholdingTaxType"
        WithholdingTaxCode ||--|{ BRG_CompanyCodeVendor: "withholdingTaxCode"
        
        %% Activity Type
        CostCenter ||--|{ ActivityType: "costCenter"
        WorkCenter ||--|{ ActivityType: "workCenter"
        ActivityType }|--|| UOM : "activityUnit"
        
        %% Cost Center Work Center Link
        CostCenter ||--|{ WorkCenter: "workCenter"
        
        %% SKF (Statistical Key Figures)
        CostCenter ||--|{ BRG_CostCenterSKF: "costCenter"
        BRG_CostCenterSKF }|--|| SKF: "skf"
        InternalOrder ||--|{ BRG_InternalOrderSKF: "internalOrder"
        BRG_InternalOrderSKF }|--|| SKF: "skf"
        SKF }|--|| UOM: "skfUnit"
    %% end